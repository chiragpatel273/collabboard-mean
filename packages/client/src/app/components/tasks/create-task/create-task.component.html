<div class="create-task-modal">
  <div class="modal-overlay" (click)="onCancel()"></div>

  <div class="modal-content">
    <div class="modal-header">
      <h2>Create New Task</h2>
      <button class="close-btn" (click)="onCancel()">âœ•</button>
    </div>

    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="task-form">
      <!-- Title -->
      <div class="form-group">
        <label for="title">Title *</label>
        <input
          type="text"
          id="title"
          formControlName="title"
          placeholder="Enter task title"
          class="form-input"
          [class.error]="taskForm.get('title')?.invalid && taskForm.get('title')?.touched"
        />
        <div class="error-message" *ngIf="taskForm.get('title')?.invalid && taskForm.get('title')?.touched">
          <small *ngIf="taskForm.get('title')?.errors?.['required']">Title is required</small>
          <small *ngIf="taskForm.get('title')?.errors?.['maxlength']">Title must be less than 100 characters</small>
        </div>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label for="description">Description</label>
        <textarea
          id="description"
          formControlName="description"
          placeholder="Enter task description (optional)"
          rows="3"
          class="form-textarea"
          [class.error]="taskForm.get('description')?.invalid && taskForm.get('description')?.touched"
        ></textarea>
        <div class="error-message" *ngIf="taskForm.get('description')?.invalid && taskForm.get('description')?.touched">
          <small *ngIf="taskForm.get('description')?.errors?.['maxlength']"
            >Description must be less than 500 characters</small
          >
        </div>
      </div>

      <!-- Priority -->
      <div class="form-group">
        <label for="priority">Priority</label>
        <select id="priority" formControlName="priority" class="form-select">
          <option *ngFor="let priority of priorities" [value]="priority.value">
            {{ priority.label }}
          </option>
        </select>
      </div>

      <!-- Due Date -->
      <div class="form-group">
        <label for="dueDate">Due Date</label>
        <input type="date" id="dueDate" formControlName="dueDate" class="form-input" />
      </div>

      <!-- Tags -->
      <div class="form-group">
        <label for="tags">Tags</label>
        <input
          type="text"
          id="tags"
          formControlName="tags"
          placeholder="Enter tags separated by commas"
          class="form-input"
        />
        <small class="form-help">Separate multiple tags with commas</small>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" (click)="onCancel()" class="btn btn-secondary">Cancel</button>
        <button type="submit" [disabled]="taskForm.invalid || isSubmitting" class="btn btn-primary">
          <span *ngIf="isSubmitting">Creating...</span>
          <span *ngIf="!isSubmitting">Create Task</span>
        </button>
      </div>
    </form>
  </div>
</div>
